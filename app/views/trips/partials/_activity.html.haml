%div.activity-place{'ng-show' => '!edit', 'ng-model' => 'day.activities',
                      'ui-sortable' => '{connectWith: \'.activity-place\', placeholder: \'well\', forcePlaceholderSize: true}'}
  %div.region-grey{'ng-repeat' => 'activity in day.activities'}
    %span{'ng-click' => 'activity.isCollapsed = !activity.isCollapsed'}
      %u{class: 'collapse-header'}
        %span{'ng-show' => 'day.activities.length > 1'}
          {{$index+1}}.
        {{activity.name}}
      %span{'ng-show' => '!!activity.price'}
        {{activity.price}}
        = fa_icon 'ruble'
    %div{collapse: 'activity.isCollapsed'}
      %p{'ng-show' => '!!activity.comment', class: 'travel-text text-italic'} {{activity.comment}}
      %p
        = render 'widgets/link_show', ng_model_url: 'activity.link_url',
          ng_model_description: 'activity.link_description'

%div{'ng-show' => 'edit'}
  %div.activity-place-edit{'ng-model' => 'day.activities',
                            'ui-sortable' => '{connectWith: \'.activity-place-edit\', placeholder: \'well\'}'}
    %div.form-horizontal.region-grey.day-activity-container{'ng-repeat' => 'activity in day.activities'}
      .form-group
        .col-md-1.activity-index
          %big
            {{$index+1}}
        .col-md-9
          = text_field_tag 'activity_name', '', 'ng-model' => 'activity.name', class: 'input-sm form-control',
            placeholder: t('trips.show.activity.name')
        .col-md-2
          %a{href: 'javascript:void(0);', 'ng-click' => 'activity.isCollapsed = !activity.isCollapsed', class: 'expand-button'}
            %span{'ng-show' => 'activity.isCollapsed'}
              = fa_icon 'arrow-right'
            %span{'ng-show' => '!activity.isCollapsed'}
              = fa_icon 'arrow-down'
          %a{href: 'javascript:void(0);', 'ng-click' => 'remove(day.activities, $index)', class: 'delete-button'}
            = fa_icon 'times'
      %div{collapse: 'activity.isCollapsed'}
        .form-group{collapse: 'isCollapsed'}
          .col-md-12
            = render 'widgets/price', name: 'activity_price', ng_model: 'activity.price', placeholder: t('trips.show.price')
        .form-group
          .col-md-12
            = text_area_tag 'activity_comment', '', 'ng-model' => 'activity.comment', class: 'form-control',
              placeholder: t('trips.show.comment'), rows: 6
        .form-group
          .col-md-12
            = render 'widgets/link', ng_model_url: 'activity.link_url'

  .form-group.pull-right
    %a{href: 'javascript:void(0);', class: '',
      'ng-click' => 'add(day.activities, {"isCollapsed" : activitiesCollapsed})'}
      = fa_icon 'plus'
