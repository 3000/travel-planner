!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var s=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(r,i){var n=e(this);i.process(function(){return n.fileupload("process",i)}),s.call(this,r,i)}},processActions:{},_processFile:function(s){var r=this,i=e.Deferred().resolveWith(r,[s]),n=i.promise();return this._trigger("process",null,s),e.each(s.processQueue,function(e,s){var i=function(e){return r.processActions[s.action].call(r,e,s)};n=n.pipe(i,s.always&&i)}),n.done(function(){r._trigger("processdone",null,s),r._trigger("processalways",null,s)}).fail(function(){r._trigger("processfail",null,s),r._trigger("processalways",null,s)}),n},_transformProcessQueue:function(s){var r=[];e.each(s.processQueue,function(){var i={};e.each(this,function(r,n){i[r]="string"===e.type(n)&&"@"===n.charAt(0)?s[n.slice(1)]:n}),r.push(i)}),s.processQueue=r},processing:function(){return this._processing},process:function(s){var r=this,i=e.extend({},this.options,s);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(s.files,function(s){var n=s?e.extend({},i):i,o=function(){return r._processFile(n)};n.index=s,r._processing+=1,r._processingQueue=r._processingQueue.pipe(o,o).always(function(){r._processing-=1,0===r._processing&&r._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})});