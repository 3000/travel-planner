(function(){$(function(){var e,o,i;return $(".fileupload").fileupload({dataType:"script",add:function(e,o){var i,t,a,l,r;if(o.files[0])return r=/(\.|\/)(gif|jpe?g|png|bmp)$/i,i=o.files[0],r.test(i.type)||r.test(i.name)?(a=parseInt($(".fileupload-form").data("maxuploadsize")||"10485760"),i.size>a?void alert(i.name+(" size should be no more than "+a/1e6+" MB")):(l=new FileReader,t=null,l.onload=function(e){return $("#photo-preview-modal .modal-body").html("<img src='"+e.target.result+"' id='image-preview-place' style='display: none;' />"),$("#photo-preview-modal").modal()},l.readAsDataURL(o.files[0]),$("#upload_photo_button").off("click").on("click",function(){return o.formData=t.tellSelect(),o.submit(),$("#photo-preview-modal").modal("hide")}),$("#photo-preview-modal").on("hidden.bs.modal",function(){return t?t.destroy():void 0}),$("#photo-preview-modal").on("shown.bs.modal",function(){var e,o,i;return i=parseInt($("#photo-preview-modal .modal-body").width()),o=$("#image-preview-place").innerWidth(),e=$("#image-preview-place").innerHeight(),$("#image-preview-place").Jcrop({boxWidth:i,aspectRatio:1,keySupport:!1,minSize:[100,100],setSelect:[0,0,Math.min(o,e),Math.min(o,e)]}),t=$("#image-preview-place").data("Jcrop")}))):void alert(i.name+" must be GIF, JPEG, BMP or PNG file")}}),i=$(".progress-wrapper"),e=$(".photo-processing"),o=$(".progress-bar"),$(".fileupload").on("fileuploadstart",function(){return i.show(),e.show()}),$(".fileupload").on("fileuploaddone",function(){return i.hide(),o.width(0)}),$(".fileupload").on("fileuploadprogressall",function(e,i){var t;return t=parseInt(i.loaded/i.total*100,10),o.css("width",t+"%")}),$(".fileupload-form a.upload-link").click(function(){return $(this).closest(".fileupload-form").find("input").click(),!1}),$(".delete-image").click(function(){return $(this).attr("data-confirm")?!0:$(this).closest("form").submit()})})}).call(this);